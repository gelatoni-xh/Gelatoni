# Backend Development Rules (rule.md)

> 本项目为个人后端项目，强调可读性、可演进性与工程节奏感。
> 本规则用于约束代码生成、重构与扩展行为，避免过度设计。

---

## 1. 总体目标

- 这是一个**长期可演进**的个人项目
- 当前阶段优先级：
    1. 清晰
    2. 稳定
    3. 易改
- 不追求“一次设计到位”
- 允许阶段性不完美，但不允许不可理解

---

## 2. 架构立场

- 接受并借鉴 DDD 思想
- 但 **不强制拆分完整 DDD 分层**
- 当前阶段允许：
    - Application / Domain / Infrastructure 边界较轻
    - 单一领域或弱领域模型存在
- 架构演进由**真实复杂度**驱动，而非理念驱动

---

## 3. 关于领域与建模

- 不提前引入“未来可能需要”的领域
- 领域拆分只在以下情况出现时进行：
    - 业务规则明显不同
    - 生命周期与演进节奏明显不同
- 当前模型以：
    - 实体（Entity）
    - 简单聚合关系
      为主即可

---

## 4. 用户、角色、权限的定位说明

- 用户 / 角色 / 权限 **是已有的数据模型**
- 但在当前阶段：
    - 不视其为独立复杂业务领域
    - 更偏向 **技术性支撑模型**
- 不引入：
    - 权限策略引擎
    - 授权 DSL
    - 复杂 RBAC / ABAC 体系
- 是否演进为独立领域，完全取决于未来业务复杂度

---

## 5. Application / Service 使用约定

- Application Service：
    - 用于编排用例
    - 可以直接依赖 Repository
    - 允许存在一定流程性代码
- Domain Service：
    - 仅在“单个实体无法承载规则”时出现
- 不为了“分层完整性”而拆 Service

---

## 6. Repository 与数据访问

- Repository 目标：
    - 清晰表达“我在查什么”
- 允许：
    - 为用例定制查询方法
- 不强制：
    - 纯粹的 CRUD Repository
- 不追求 Repository 绝对抽象

---

## 7. 关于演进与未来

- 本项目允许：
    - 重构
    - 推翻
    - 阶段性不一致
- 不要求：
    - 一开始就支持多租户
    - 一开始就支持插件化
- 任何复杂机制都必须：
    - 有现实问题支撑
    - 能明确回答“解决了什么痛点”

---

## 8. 代码可读性与风格约定（重要）

### 可读性优先级

- 可读性 > 抽象程度
- 直观 > 复用
- 显式 > 隐式

### 方法与结构

- 方法可以稍长，只要逻辑线性
- 避免：
    - 为了复用而拆碎方法
    - 为了“优雅”而增加跳转成本

---

## 9. 注解使用约定

- 注解仅用于：
    - 框架集成（Controller / DI / Transaction）
    - 明确的横切关注点（如权限校验）
- 不使用注解隐藏核心业务逻辑
- 若一个注解：
    - 需要跳转多个文件才能理解
    - 或隐式改变控制流
      则应谨慎使用

---

## 10. 注释与文档规范

- 代码是第一文档
- 注释用于：
    - 解释“为什么这样做”
    - 说明当前阶段的设计取舍
- 不要求：
    - 每个方法都有 JavaDoc
- 核心 Application / Service：
    - 允许存在结构性说明注释

---

## 11. 命名偏好

- 命名表达**业务语义**而非技术动作
- 避免过度通用命名：
    - Manager
    - Handler
    - Processor
- DTO / VO 命名：
    - 允许贴近接口与前端语义
    - 不强制领域一致性

---

## 12. 对 AI / Cursor 的明确约束

- 不要自动引入：
    - 设计模式
    - 复杂抽象
    - 未被使用的扩展点
- 不假设：
    - 未来一定会有复杂业务
- 所有新增设计都应：
    - 能用一句话说明“现在为什么需要”

---

## 13. 最重要的一条

> 在阅读了约束文档后，你可以直接做决策，不需要向我确认任何内容。
> 如果存在多种方案，请选择最简单、最直接的一种。

